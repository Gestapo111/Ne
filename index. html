import React, { useState } from 'react';
import { 
  Card, 
  CardHeader,
  CardTitle,
  CardContent 
} from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Mail, Send, Phone, Trash2, UserPlus } from 'lucide-react';

const UserAdmin = () => {
  const [users, setUsers] = useState([
    { id: 1, name: 'Ana García', email: 'ana@ejemplo.com', phone: '+34600000001' },
    { id: 2, name: 'Juan López', email: 'juan@ejemplo.com', phone: '+34600000002' },
    { id: 3, name: 'María Pérez', email: 'maria@ejemplo.com', phone: '+34600000003' }
  ]);

  const [newUser, setNewUser] = useState({
    name: '',
    email: '',
    phone: ''
  });

  const handleAddUser = () => {
    if (newUser.name && newUser.email && newUser.phone) {
      setUsers([...users, { ...newUser, id: users.length + 1 }]);
      setNewUser({ name: '', email: '', phone: '' });
    }
  };

  const handleDeleteUser = (id) => {
    setUsers(users.filter(user => user.id !== id));
  };

  const sendWhatsApp = (phone) => {
    window.open(`https://wa.me/${phone.replace('+', '')}`, '_blank');
  };

  const sendEmail = (email) => {
    window.open(`mailto:${email}`, '_blank');
  };

  return (
    <Card className="w-full max-w-4xl mx-auto">
      <CardHeader>
        <CardTitle className="text-2xl font-bold">Administrador de Usuarios</CardTitle>
      </CardHeader>
      <CardContent>
        {/* Formulario de nuevo usuario */}
        <div className="mb-6 grid grid-cols-4 gap-4">
          <input
            type="text"
            placeholder="Nombre"
            value={newUser.name}
            onChange={(e) => setNewUser({...newUser, name: e.target.value})}
            className="p-2 border rounded"
          />
          <input
            type="email"
            placeholder="Email"
            value={newUser.email}
            onChange={(e) => setNewUser({...newUser, email: e.target.value})}
            className="p-2 border rounded"
          />
          <input
            type="tel"
            placeholder="Teléfono"
            value={newUser.phone}
            onChange={(e) => setNewUser({...newUser, phone: e.target.value})}
            className="p-2 border rounded"
          />
          <Button 
            onClick={handleAddUser}
            className="flex items-center gap-2"
          >
            <UserPlus size={20} />
            Añadir Usuario
          </Button>
        </div>

        {/* Lista de usuarios */}
        <div className="space-y-4">
          {users.map(user => (
            <div key={user.id} className="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
              <div className="flex-1">
                <h3 className="font-medium">{user.name}</h3>
                <p className="text-sm text-gray-600">{user.email}</p>
                <p className="text-sm text-gray-600">{user.phone}</p>
              </div>
              <div className="flex gap-2">
                <Button 
                  variant="outline"
                  onClick={() => sendWhatsApp(user.phone)}
                  className="flex items-center gap-2"
                >
                  <Phone size={20} />
                  WhatsApp
                </Button>
                <Button 
                  variant="outline"
                  onClick={() => sendEmail(user.email)}
                  className="flex items-center gap-2"
                >
                  <Mail size={20} />
                  Email
                </Button>
                <Button 
                  variant="destructive"
                  onClick={() => handleDeleteUser(user.id)}
                  className="flex items-center gap-2"
                >
                  <Trash2 size={20} />
                  Eliminar
                </Button>
              </div>
            </div>
          ))}
        </div>
      </CardContent>
    </Card>
  );
};

export default UserAdmin;
